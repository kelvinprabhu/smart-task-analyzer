<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Task Analyzer</title>
    <link rel="stylesheet" href="css/style.css">

</head>

<body>
    <div class="container">
        <header>
            <h1>Smart Task Analyzer</h1>
            <p>Intelligent task prioritization using advanced algorithms</p>
        </header>

        <div class="api-url-input" hidden="true">
            <label for="apiUrl">API Base URL:</label>
            <input type="text" id="apiUrl" value="http://127.0.0.1:8000" placeholder="http://127.0.0.1:8000">
        </div>

        <div class="main-content">
            <!-- Input Section -->
            <div class="card">
                <h2>Task Input</h2>

                <div class="input-tabs">
                    <button class="tab-btn active" onclick="switchTab('form')">Single Task</button>
                    <button class="tab-btn" onclick="switchTab('bulk')">Bulk JSON</button>
                </div>

                <!-- Single Task Form -->
                <div id="form-tab" class="tab-content active">
                    <form id="singleTaskForm">
                        <div class="form-group">
                            <label for="title">Task Title *</label>
                            <input type="text" id="title" required placeholder="e.g., Implement Authentication">
                        </div>

                        <div class="form-group">
                            <label for="dueDate">Due Date *</label>
                            <input type="date" id="dueDate" required>
                        </div>

                        <div class="form-group">
                            <label for="estimatedHours">Estimated Hours *</label>
                            <input type="number" id="estimatedHours" step="0.5" min="0" required placeholder="e.g., 4">
                        </div>

                        <div class="form-group">
                            <label for="importance">Importance (1-10) *</label>
                            <input type="number" id="importance" min="1" max="10" required placeholder="e.g., 8">
                        </div>

                        <div class="form-group">
                            <label for="dependencies">Dependencies (comma-separated task IDs)</label>
                            <input type="text" id="dependencies" placeholder="e.g., 1, 3, 5">
                        </div>

                        <button type="button" class="btn btn-secondary" onclick="addTask()">Add to List</button>
                    </form>

                    <div id="taskQueue" style="margin-top: 20px;"></div>
                </div>

                <!-- Bulk JSON Input -->
                <div id="bulk-tab" class="tab-content">
                    <div class="form-group">
                        <label for="bulkJson">Paste JSON Array</label>
                        <textarea id="bulkJson" placeholder='[
  {
    "title": "Task 1",
    "due_date": "2025-12-01",
    "estimated_hours": 4,
    "importance": 8,
    "dependencies": []
  }
]'></textarea>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="analyzeTasks()">Analyze Tasks</button>
                <button class="btn btn-secondary" onclick="resetDatabase()">Reset Database</button>
                <button class="btn btn-secondary" onclick="loadTopSuggestions()">Get Top Suggestions</button>
            </div>

            <!-- Output Section -->
            <div class="card">
                <h2>Task Priority Results</h2>

                <div class="strategy-selector">
                    <label for="strategy">Sorting Strategy:</label>
                    <select id="strategy" onchange="applySortingStrategy()">
                        <option value="smart">Smart Balance (Default Algorithm)</option>
                        <option value="fastest">Fastest Wins (Low Effort First)</option>
                        <option value="impact">High Impact (Importance First)</option>
                        <option value="deadline">Deadline Driven (Due Date First)</option>
                    </select>
                </div>

                <div id="results">
                    <div class="empty-state">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M9 11l3 3L22 4"></path>
                            <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"></path>
                        </svg>
                        <h3>No tasks analyzed yet</h3>
                        <p>Add tasks and click "Analyze Tasks" to get started</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Card -->
        <div id="statsCard" style="display: none;"></div>



        <!-- Top Suggestions -->
        <div class="card visualization-card" id="suggestCard" style="display: none;">
            <h2>Top Task Suggestions</h2>
            <p style="color: #666; margin-bottom: 20px;">Algorithm-recommended tasks based on comprehensive analysis</p>
            <div id="suggestResults"></div>
        </div>
        <!-- Eisenhower Matrix -->
        <div class="card visualization-card" id="eisenhowerCard" style="display: none;">
            <h2>Eisenhower Matrix (Urgent Ã— Important)</h2>
            <div class="eisenhower-matrix" id="eisenhowerMatrix"></div>
        </div>

        <!-- Dependency Graph -->
        <div class="card visualization-card" id="graphCard" style="display: none;">
            <h2>Dependency Graph Visualization</h2>
            <p style="color: #666; margin-bottom: 15px;">Visual representation of task dependencies</p>
            <div style="display: flex; gap: 15px; margin-bottom: 15px;">
                <button class="btn btn-secondary" onclick="renderGraph()">Render Graph</button>
                <button class="btn btn-secondary" onclick="downloadGraphDot()">Download DOT</button>
            </div>
            <div id="graphVisualization"
                style="background: #f8f9fa; padding: 20px; border-radius: 8px; min-height: 400px; overflow: auto;">
                <p style="text-align: center; color: #999;">Graph will be rendered here</p>
            </div>
            <details style="margin-top: 15px;">
                <summary style="cursor: pointer; font-weight: 600; color: #667eea;">View Raw DOT Format</summary>
                <pre id="dotSource"
                    style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 8px; overflow-x: auto; margin-top: 10px;"></pre>
            </details>
        </div>
    </div>
    <script src="js/main.js"></script>


</body>

</html>